# Basic project metadata
project:
  name: eudiw-wallet-metadata-library-poc
  description: A helper lib for eudiw-wallet-issuer-poc. Test and PoC only
  license: EUPL-1.2 
  copyright: 2025 Digg - The Agency for Digital Government
  inceptionYear: 2025
  authors:
    - Digg - Agency for Digital Government
  snapshot:
    pattern: .*-SNAPSHOT
    label: early-access
    fullChangelog: true

# GitHub release configuration
release:
  github:
    owner: janderssonse
    overwrite: true     # Allows updating existing releases
    draft: true        # Creates as final release, not draft
    sign: true          # Signs release assets
    branch: main
    changelog:
      formatted: 'ALWAYS'
      links: true
      skipMergeCommits: true
      preset: 'conventional-commits'
      contributors:
        enabled: false
      format: |
        # Changelog
        All notable changes to this project will be documented in this file.
        
        The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.1/),
        and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).
        
        {{#each releases}}
        ## [{{name}}]{{#if dateString}} - {{dateString}}{{/if}}
        {{#if description}}
        > {{description}}
        {{/if}}
        
        {{#each categories}}
        ### {{name}}
        
        {{#each commits}}
        - {{message}} {{#if scope}}(_{{scope}}_){{/if}}
        {{/each}}
        {{/each}}
        
        {{#if contributors}}
        ### Contributors
        {{#each contributors}}
        * {{name}}
        {{/each}}
        {{/if}}
        {{/each}}

        {{#each releases}}
        {{#unless @first}}
        [{{name}}]: https://github.com/{{owner}}/{{repo}}/compare/v{{previous.name}}...v{{name}}
        {{/unless}}
        {{#if @first}}
        [{{name}}]: https://github.com/{{owner}}/{{repo}}/releases/tag/v{{name}}
        {{/if}}
        {{/each}}
  
      hide:
        categories: ['merge']

checksum:
  algorithms:
    - SHA-256
    - SHA-512


# GPG signing configuration
signing:
  active: ALWAYS
  armored: true


# Maven deployment to GitHub packages
deploy:
  maven:
    github:
      app:
        active: ALWAYS
        url: https://maven.pkg.github.com/janderssonse/eudiw-wallet-metadata-lib-poc
        applyMavenCentralRules: true
        snapshotSupported: true
        stagingRepositories:           
          - target/staging-deploy

# SBOM generation
catalog:
  sbom:
    syft:
      active: ALWAYS
      formats: 
        - CYCLONEDX_JSON  
        - SPDX_JSON
      pack:
        enabled: true
        
# Syft need to know what to sign
distributions:
  library:
    artifacts:
      - path: target/eudiw-wallet-metadata-lib-poc-{{projectVersion}}.jar